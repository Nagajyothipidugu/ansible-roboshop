- name: configure payment component 
  hosts: payment 
  become: yes 
  tasks: 
    - name : install python3 packages 
      ansible.builtin.dnf: 
        name: "{{ item }}"
        state: installed 
      loop: 
       - python3
       - gcc 
       - python3-devel 

    - name: Create roboshop system user 
      ansible.builtin.user: 
       name: roboshop 
       shell: /sbin/nologin 
       system: true 
       home: /app    

    - name: create app directory 
      ansible.builtin.file: 
       path: /app 
       state: directory 

    - name: Download the payment code 
      ansible.builtin.get_url: 
       url: https://roboshop-artifacts.s3.amazonaws.com/payment-v3.zip 
       dest: /tmp/payment.zip 

    - name: Extract payment code 
      ansible.builtin.unarchive: 
       src: /tmp/payment.zip 
       dest: /app 
       remote_src: yes    